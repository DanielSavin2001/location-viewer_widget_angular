<div class="u-margin-top-xs">
    <div class="a-input">
        <img *ngIf="layer?.legend?.length === 1" [src]="imageUrl" class="layer-icon" />
        <div class="a-input__checkbox">
            <input
                type="checkbox"
                id="layer-{{ layer?.id }}"
                name="layer-{{ layer?.id }}"
                [checked]="layer?.visible"
                [(ngModel)]="layer.visible"
                (change)="onChangeVisibility()"
            />
            <label for="layer-{{ layer?.id }}">{{ layer?.name }}</label>
            <span
                *ngIf="showLayers() || showLegend()"
                class="fa toggle-layer u-margin-left-xs"
                [ngClass]="{ 'fa-angle-up': open, 'fa-angle-down': !open }"
                (click)="open = !open"
            ></span>
        </div>
    </div>
    <div *ngIf="open && showLayers()" class="u-margin-left-xs">
        <aui-layer *ngFor="let childLayer of layer?.layers" [layer]="childLayer"> </aui-layer>
    </div>

    <div *ngIf="open && showLegend()" class="u-margin-left">
        <aui-layer-legend *ngFor="let layerLegend of layer.legend" [layerLegend]="layerLegend"></aui-layer-legend>
    </div>
</div>
